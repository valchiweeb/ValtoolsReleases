<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy"
        content="default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src https://fonts.gstatic.com; connect-src https://*.firebaseio.com https://*.firebasedatabase.app https://api.jsonbin.io">
    <title>ValTools Free Tools For Now</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <!-- Custom Titlebar -->
    <div class="titlebar">
        <div class="titlebar-drag">
            <div class="titlebar-icon">‚ö°</div>
            <span class="titlebar-title">ValTools</span>
            <span class="titlebar-version">Free Tools For Now</span>
        </div>
        <div class="titlebar-controls">
            <button class="titlebar-btn" id="btn-minimize">‚îÄ</button>
            <button class="titlebar-btn" id="btn-maximize">‚ñ°</button>
            <button class="titlebar-btn close" id="btn-close">‚úï</button>
        </div>
    </div>

    <!-- Splash Screen -->
    <div class="splash-screen" id="splash-screen">
        <div class="splash-content">
            <div class="splash-logo">‚ö°</div>
            <div class="splash-title">ValTools</div>
            <div class="splash-status" id="splash-status">Memuat...</div>
            <div class="splash-loader">
                <div class="splash-loader-bar" id="splash-progress-bar"></div>
            </div>
            <div class="splash-percent" id="splash-percent"></div>
        </div>
    </div>

    <div class="app-container" id="app-container" style="display: none;">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="logo-container">
                    <div class="logo-icon">‚ö°</div>
                    <div class="logo-text">
                        <span class="logo-title">ValTools</span>
                        <span class="logo-subtitle">Free Tools For Now</span>
                    </div>
                </div>
            </div>

            <nav class="sidebar-nav">
                <button class="nav-btn active" data-view="dashboard">
                    <span class="nav-icon">üè†</span>
                    <span class="nav-text">Dashboard</span>
                </button>
                <button class="nav-btn" data-view="gameinjection">
                    <span class="nav-icon">üéÆ</span>
                    <span class="nav-text">Game Injection</span>
                </button>
                <!-- Menu Steam Guard disembunyikan -->
                <button class="nav-btn" data-view="steamguard" style="display: none;">
                    <span class="nav-icon">üõ°Ô∏è</span>
                    <span class="nav-text">Steam Guard</span>
                </button>
                <button class="nav-btn" id="btn-donate">
                    <span class="nav-icon">üíñ</span>
                    <span class="nav-text">Donate Me</span>
                </button>
                <button class="nav-btn" id="btn-settings">
                    <span class="nav-icon">‚öôÔ∏è</span>
                    <span class="nav-text">Change Steam Path</span>
                </button>
                <button class="nav-btn" id="btn-refresh">
                    <span class="nav-icon">üîÑ</span>
                    <span class="nav-text">Refresh</span>
                </button>
            </nav>

            <!-- Divider dan Admin Login disembunyikan -->
            <div class="sidebar-divider" style="display: none;"></div>

            <button class="nav-btn admin-btn" id="btn-admin-login" style="display: none;">
                <span class="nav-icon">üîê</span>
                <span class="nav-text">Admin Login</span>
            </button>

            <div class="sidebar-footer">
                <div class="role-badge" id="role-badge">
                    <span class="role-icon">üë§</span>
                    <span class="role-text">Guest Mode</span>
                </div>
                <div class="version-info" id="version-info">v1.0.0</div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Dashboard View -->
            <section class="view active" id="view-dashboard">
                <div class="dashboard-card game-view">
                    <div class="card-header">
                        <div class="card-icon">üéÆ</div>
                        <h1 class="card-title">Select Game</h1>
                        <p class="card-subtitle">Pilih game untuk melihat akun</p>
                    </div>

                    <!-- Search -->
                    <div class="search-filter-container">
                        <div class="search-box">
                            <span class="search-icon">üîç</span>
                            <input type="text" class="search-input" id="search-input"
                                placeholder="Cari game atau akun...">
                        </div>
                    </div>

                    <!-- Game Cards Grid -->
                    <div class="game-grid" id="game-grid">
                        <div class="account-loading">
                            <div class="spinner"></div>
                            <span>Loading games...</span>
                        </div>
                    </div>

                    <!-- Admin Actions at bottom -->
                    <div class="card-actions" style="margin-top: 15px;">
                        <div class="admin-actions" id="admin-actions"
                            style="display: none; width: 100%; justify-content: center;">
                            <button class="btn btn-secondary" id="btn-add-account" title="Add Account">‚ûï Tambah
                                Akun</button>
                        </div>
                    </div>
                </div>

                <!-- Account Panel (shown after selecting a game) -->
                <div class="dashboard-card account-panel" id="account-panel" style="display: none;">
                    <div class="card-header">
                        <button class="btn-back" id="btn-back-to-games">‚Üê Kembali</button>
                        <h1 class="card-title" id="selected-game-title">Game Name</h1>
                        <p class="card-subtitle" id="account-count">0 akun tersedia</p>
                    </div>

                    <div class="account-list-container">
                        <div class="account-list" id="account-list"></div>
                    </div>

                    <div class="card-actions">
                        <button class="btn btn-primary btn-inject" id="btn-inject">
                            <span class="btn-icon">üöÄ</span>
                            <span>LOCK & INJECT</span>
                        </button>
                        <div class="admin-actions-panel" id="admin-actions-panel" style="display: none;">
                            <button class="btn btn-secondary" id="btn-add-in-category"
                                title="Tambah di game ini">‚ûï</button>
                            <button class="btn btn-warning" id="btn-edit-account" title="Edit">‚úèÔ∏è</button>
                            <button class="btn btn-danger" id="btn-delete-account" title="Delete">üóëÔ∏è</button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Steam Guard View -->
            <section class="view" id="view-steamguard">
                <div class="steamguard-container">
                    <!-- Login Panel -->
                    <div class="sg-login-panel" id="sg-login-panel">
                        <div class="sg-login-card">
                            <div class="sg-logo">üõ°Ô∏è</div>
                            <h2>Steam Guard Login</h2>

                            <div class="sg-tabs">
                                <button class="sg-tab active" data-tab="guest">GUEST</button>
                                <button class="sg-tab" data-tab="admin">ADMIN</button>
                            </div>

                            <div class="sg-tab-content active" id="sg-tab-guest">
                                <input type="text" class="sg-input" id="sg-voucher-code" placeholder="VOUCHER CODE">
                                <button class="btn btn-primary" id="sg-guest-login">MASUK</button>
                            </div>

                            <div class="sg-tab-content" id="sg-tab-admin">
                                <input type="password" class="sg-input" id="sg-admin-password"
                                    placeholder="ADMIN PASSWORD">
                                <button class="btn btn-danger" id="sg-admin-login">LOGIN</button>
                            </div>
                        </div>
                    </div>

                    <!-- Dashboard Panel (after login) -->
                    <div class="sg-dashboard" id="sg-dashboard" style="display: none;">
                        <div class="sg-sidebar">
                            <h3>MENU</h3>
                            <button class="sg-nav-btn active" data-sg-view="accounts">üè† Daftar Akun</button>
                            <button class="sg-nav-btn sg-admin-only" data-sg-view="add-account">+ Tambah Akun</button>
                            <button class="sg-nav-btn sg-admin-only" data-sg-view="voucher">üéüÔ∏è Buat Voucher</button>
                            <button class="sg-nav-btn logout" id="sg-logout">Logout</button>
                        </div>
                        <div class="sg-main">
                            <!-- Accounts List -->
                            <div class="sg-view active" id="sg-view-accounts">
                                <h2>DAFTAR AKUN STEAM</h2>
                                <div class="sg-account-list" id="sg-account-list"></div>
                            </div>

                            <!-- Add Account Form -->
                            <div class="sg-view" id="sg-view-add-account">
                                <h2>TAMBAH AKUN BARU</h2>
                                <div class="sg-form">
                                    <label>Nama:</label>
                                    <input type="text" class="sg-input" id="sg-acc-name">
                                    <label>Email:</label>
                                    <input type="email" class="sg-input" id="sg-acc-email">
                                    <label>Password:</label>
                                    <input type="password" class="sg-input" id="sg-acc-pass">
                                    <div class="sg-form-actions">
                                        <button class="btn btn-primary" id="sg-save-account">Simpan</button>
                                        <button class="btn btn-secondary" id="sg-cancel-add">Batal</button>
                                    </div>
                                </div>
                            </div>

                            <!-- Voucher Form -->
                            <div class="sg-view" id="sg-view-voucher">
                                <h2>VOUCHER TAMU</h2>
                                <div class="sg-form">
                                    <label>Durasi (Hari):</label>
                                    <input type="number" class="sg-input" id="sg-voucher-days" value="7">
                                    <button class="btn btn-primary" id="sg-generate-voucher">Generate</button>
                                    <div class="sg-voucher-result" id="sg-voucher-result" style="display: none;">
                                        <label>KODE:</label>
                                        <input type="text" class="sg-input sg-voucher-code-result"
                                            id="sg-voucher-code-result" readonly>
                                        <span class="sg-voucher-expiry" id="sg-voucher-expiry"></span>
                                    </div>
                                </div>
                            </div>

                            <!-- Console -->
                            <div class="sg-console" id="sg-console"></div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Game Injection View -->
            <section class="view" id="view-gameinjection">
                <div class="gi-container">
                    <!-- Action Bar -->
                    <div class="gi-actions-bar">
                        <button class="gi-action-btn gi-activate-btn" id="gi-activate-inject-btn">
                            <span class="gi-action-icon">üîì</span>
                            <span>Activate Inject</span>
                        </button>
                        <button class="gi-action-btn gi-restart-btn" id="gi-restart-steam-btn">
                            <span class="gi-action-icon">üîÑ</span>
                            <span>Restart Steam</span>
                        </button>
                        <button class="gi-action-btn gi-settings-btn" id="gi-settings-btn">
                            <span class="gi-action-icon">‚öôÔ∏è</span>
                            <span>Steam Path</span>
                        </button>
                    </div>

                    <!-- Main Card -->
                    <div class="gi-card">
                        <div class="gi-card-header">
                            <span class="gi-card-icon">üéÆ</span>
                            <h2>Game Injection</h2>
                        </div>

                        <div class="gi-info-box">
                            <span class="gi-info-icon">‚ÑπÔ∏è</span>
                            <span>Masukkan <strong>Game ID</strong> atau paste Steam URL untuk inject</span>
                        </div>

                        <div class="gi-input-group">
                            <label>GAME ID / URL</label>
                            <input type="text" id="gi-game-id"
                                placeholder="1245670 atau https://store.steampowered.com/app/..." autocomplete="off">
                        </div>

                        <div class="gi-game-info" id="gi-game-info" style="display: none;">
                            <div class="gi-game-name" id="gi-game-name">Loading...</div>
                            <div class="gi-dlc-count" id="gi-dlc-count">0 DLC detected</div>
                        </div>

                        <div class="gi-button-group">
                            <button class="gi-btn gi-btn-add" id="gi-add-btn">
                                <span>+</span> ADD GAME
                            </button>
                            <button class="gi-btn gi-btn-delete" id="gi-delete-btn">
                                <span>üóëÔ∏è</span> DELETE
                            </button>
                        </div>

                        <div class="gi-status-message" id="gi-status-message"></div>
                    </div>

                    <!-- How to Use Card -->
                    <div class="gi-card gi-how-to">
                        <h2>Cara Pakai</h2>
                        <div class="gi-step">
                            <span class="gi-step-number">1</span>
                            <span>Klik "Activate Inject" untuk mengaktifkan SteamTools</span>
                        </div>
                        <div class="gi-step">
                            <span class="gi-step-number">2</span>
                            <span>Masukkan Game ID atau paste URL Steam</span>
                        </div>
                        <div class="gi-step">
                            <span class="gi-step-number">3</span>
                            <span>Klik "Add Game" untuk inject game</span>
                        </div>
                        <div class="gi-step">
                            <span class="gi-step-number">4</span>
                            <span>Klik "Restart Steam" untuk apply perubahan</span>
                        </div>
                    </div>
                </div>
            </section>
        </main>

        <!-- Status Bar -->
        <footer class="status-bar">
            <div class="status-left">
                <span class="status-target" id="status-target">üéØ Target: steam.exe</span>
            </div>
            <div class="status-right">
                <span class="status-connection" id="status-connection">‚ö™ Connecting...</span>
            </div>
        </footer>
    </div>

    <!-- Modal Overlay -->
    <div class="modal-overlay" id="modal-overlay">
        <div class="modal" id="modal">
            <div class="modal-icon" id="modal-icon">üîê</div>
            <h2 class="modal-title" id="modal-title">Modal Title</h2>
            <p class="modal-subtitle" id="modal-subtitle">Enter value</p>
            <input type="text" class="modal-input" id="modal-input">
            <div class="modal-actions">
                <button class="btn btn-primary" id="modal-ok">‚úì OK</button>
                <button class="btn btn-secondary" id="modal-cancel">‚úï Cancel</button>
            </div>
        </div>
    </div>

    <div id="update-modal" class="custom-modal update-modal-overlay" style="display: none;">
        <div class="update-card">
            <div class="update-icon-circle">
                <span class="update-icon">üì¶</span>
            </div>
            <h2>Update Available!</h2>
            <p>A new version <span id="update-version-text" style="color: #d1d5db;">1.0.0</span> is ready to be
                installed.</p>
            <p class="download-status" id="download-status-text">Download complete!</p>
            <button id="btn-restart-install" class="btn-update-action">Restart & Install</button>
        </div>
    </div>

    <!-- Donate Modal -->
    <div id="donate-modal" class="custom-modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Support Development</h2>
                <button class="modal-close" id="close-donate">‚úï</button>
            </div>
            <div class="modal-body" style="text-align: center;">
                <div style="font-size: 48px; margin-bottom: 20px;">üíñ</div>
                <p>If you like ValTools, consider supporting me!</p>
                <div class="donate-buttons"
                    style="margin-top: 20px; display: flex; gap: 10px; justify-content: center;">
                    <a href="#" class="btn-accent"
                        onclick="window.electronAPI.openExternal('https://saweria.co/valchi')">Saweria</a>
                    <a href="#" class="btn-secondary"
                        onclick="window.electronAPI.openExternal('https://ko-fi.com/valc2')">Ko-fi</a>
                </div>
            </div>
        </div>
    </div>

    <!-- Internet Warning Toast (non-blocking) -->
    <div id="internet-warning-modal" class="internet-warning-toast" style="display: none;">
        <div class="toast-content">
            <span class="toast-icon">üì°</span>
            <span class="toast-text">Koneksi internet terputus</span>
            <button class="toast-close"
                onclick="document.getElementById('internet-warning-modal').style.display='none'">‚úï</button>
        </div>
    </div>

    <!-- Game Injection Settings Modal -->
    <div id="gi-settings-modal" class="gi-modal">
        <div class="gi-modal-content">
            <div class="gi-modal-header">
                <h3>‚öôÔ∏è Steam Path Settings</h3>
                <button class="gi-modal-close" id="gi-close-settings">‚úï</button>
            </div>
            <div class="gi-modal-body">
                <div class="gi-setting-group">
                    <label>Steam Installation Path</label>
                    <div class="gi-path-input-row">
                        <input type="text" id="gi-custom-steam-path" placeholder="C:\Program Files (x86)\Steam">
                        <button class="gi-btn-browse" id="gi-browse-path-btn">üìÅ Browse</button>
                    </div>
                    <small>Kosongkan untuk auto-detect</small>
                </div>
            </div>
            <div class="gi-modal-footer">
                <button class="gi-btn gi-btn-save" id="gi-save-settings">üíæ Save Settings</button>
            </div>
        </div>
    </div>

    <!-- Game Injection Toast Container -->
    <div class="gi-toast-container" id="gi-toast-container"></div>

    <!-- Game Injection Loading Overlay -->
    <div class="gi-loading-overlay" id="gi-loading-overlay" style="display: none;">
        <div class="gi-loading-spinner"></div>
        <div class="gi-loading-text">Processing...</div>
    </div>

    <script src="renderer.js"></script>
</body>

</html>